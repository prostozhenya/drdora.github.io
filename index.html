<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è, –î–∞—à–∞ üíñ</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

body {
  margin: 0;
  height: 100vh;
  font-family: 'Poppins', sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  background: linear-gradient(135deg, #111, #2d1b3d);
  position: relative;
  color: white;
  overflow: hidden;
}

/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */
h1 {
  position: absolute;
  top: 10%;
  font-size: 3em;
  text-align: center;
  color: #ff99cc;
  text-shadow: 0 0 10px #ff66cc, 0 0 30px #ff66ff;
  opacity: 0;
  animation: fadeIn 3s forwards;
  z-index: 10;
}

@keyframes fadeIn { to { opacity: 1; } }

/* –ö–Ω–æ–ø–∫–∞ –∑–∞–ø—É—Å–∫–∞ */
#playButton {
  padding: 15px 40px;
  font-size: 1.3em;
  border: none;
  border-radius: 25px;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(12px) saturate(180%);
  color: #fff;
  cursor: pointer;
  box-shadow: 0 0 20px rgba(255, 102, 204, 0.6);
  transition: 0.3s;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10;
}

#playButton:hover {
  transform: translateY(-50%) scale(1.1);
  box-shadow: 0 0 40px rgba(255, 102, 204, 0.9);
}

/* –≠–∫–≤–∞–ª–∞–π–∑–µ—Ä */
#equalizer {
  position: absolute;
  bottom: 60px;
  width: 90%;
  max-width: 900px;
  height: 90px;
  border-radius: 20px;
  backdrop-filter: blur(25px) saturate(180%);
  background: rgba(255, 102, 204, 0.15);
  box-shadow:
    0 0 30px rgba(255, 102, 204, 0.7),
    inset 0 0 15px rgba(255, 182, 193, 0.5);
  overflow: hidden;
  z-index: 5;
}

#equalizerCanvas {
  width: 100%;
  height: 100%;
}

/* –§–ª–∞–≥ */
#flag {
  position: absolute;
  top: 15%;
  left: 50%;
  transform: translateX(-50%);
  width: 250px;
  opacity: 0.9;
  animation: float 5s ease-in-out infinite;
  z-index: 1;
}

@keyframes float {
  0%, 100% { transform: translate(-50%, -5px) rotate(-2deg); }
  50% { transform: translate(-50%, 5px) rotate(2deg); }
}

/* –ü–µ—á–µ–Ω—å–∫–∞ */
.cookie {
  position: absolute;
  width: 70px;
  opacity: 0.9;
  animation: fall linear infinite;
  z-index: 2;
}

@keyframes fall {
  0% {
    transform: translateY(-100px) rotate(0deg);
    opacity: 0;
  }
  10% { opacity: 1; }
  100% {
    transform: translateY(110vh) rotate(360deg);
    opacity: 0.8;
  }
}

/* –§–æ—Ç–æ */
.photo {
  position: absolute;
  width: 120px;
  height: 120px;
  border-radius: 20px;
  object-fit: cover;
  pointer-events: none;
  transform: translate(-50%, -50%);
  box-shadow: 0 0 20px rgba(255, 102, 204, 0.8),
              0 0 40px rgba(255, 102, 255, 0.5);
  transition: transform 0.3s ease, opacity 0.3s ease;
  z-index: 3;
}

/* –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ */
.confetti {
  position: absolute;
  width: 15px;
  height: 15px;
  opacity: 0;
  z-index: 2;
}

/* Footer */
footer {
  position: absolute;
  bottom: 20px;
  text-align: center;
  font-size: 14px;
  color: #ff99cc;
  z-index: 10;
}
footer a {
  color: #ff66cc;
  text-decoration: none;
  margin: 0 6px;
  transition: color 0.3s;
}
footer a:hover {
  color: #ff99ff;
}

/* –°–µ—Ä–¥–µ—á–∫–∏ */
.heart {
  position: absolute;
  font-size: 24px;
  color: #ff66cc;
  opacity: 0;
  z-index: 2;
  pointer-events: none;
}

/* –°–æ–æ–±—â–µ–Ω–∏–µ */
#message {
  position: absolute;
  top: 25%;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(15px);
  padding: 20px 30px;
  border-radius: 15px;
  text-align: center;
  max-width: 80%;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.5s ease;
  z-index: 10;
  box-shadow: 0 0 20px rgba(255, 102, 204, 0.5);
}

#message.show {
  opacity: 1;
  transform: translateY(0);
}
</style>
</head>
<body>

<h1>–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è, –î–∞—à–∞ üéÇüí´</h1>

<!-- –§–ª–∞–≥ -->
<img id="flag" src="images/flag.png" alt="–§–ª–∞–≥">

<!-- –ü–µ—á–µ–Ω—å–∫–∞ -->
<img class="cookie" src="images/cookie1.png" style="left:10%; animation-duration:9s; animation-delay:0s;">
<img class="cookie" src="images/cookie1.png" style="left:40%; animation-duration:11s; animation-delay:2s;">
<img class="cookie" src="images/cookie1.png" style="left:70%; animation-duration:8s; animation-delay:1s;">

<!-- –°–æ–æ–±—â–µ–Ω–∏–µ -->
<div id="message">
  <h2>–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è! üéâ</h2>
  <p>–ü—É—Å—Ç—å —ç—Ç–æ—Ç –¥–µ–Ω—å –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω —Ä–∞–¥–æ—Å—Ç—å—é, —Å–º–µ—Ö–æ–º –∏ —Å–∞–º—ã–º–∏ —Ç—ë–ø–ª—ã–º–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏! üíñ</p>
</div>

<!-- –ú—É–∑—ã–∫–∞ -->
<button id="playButton">–ù–∞–∂–º–∏ üéµ</button>
<audio id="bgm" loop>
  <source src="music/papa_temnogo_princa.mp3" type="audio/mpeg" />
</audio>

<!-- –≠–∫–≤–∞–ª–∞–π–∑–µ—Ä -->
<div id="equalizer">
  <canvas id="equalizerCanvas"></canvas>
</div>

<footer>
  designed by <b>prostozhenyaaa</b><br />
  <a href="https://instagram.com/prostozhenyaaa" target="_blank">Instagram</a> | 
  <a href="https://vk.com/prostozhenyaaa" target="_blank">VK</a> | 
  <a href="https://t.me/prostozhenyaaa" target="_blank">Telegram</a>
</footer>

<script>
// --- –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ ---
const photos = [
  "images/dasha1.jpg",
  "images/dasha2.jpg",
  "images/dasha3.jpg",
  "images/dasha4.jpg",
  "images/dasha5.jpg",
];

// --- –≠–∫–≤–∞–ª–∞–π–∑–µ—Ä ---
const equalizerDiv = document.getElementById("equalizer");
const canvas = document.getElementById("equalizerCanvas");
const ctx = canvas.getContext("2d");
const bgm = document.getElementById("bgm");
const playButton = document.getElementById("playButton");
const message = document.getElementById("message");

function resizeCanvas() {
  const style = getComputedStyle(equalizerDiv);
  canvas.width = parseInt(style.width) * window.devicePixelRatio;
  canvas.height = parseInt(style.height) * window.devicePixelRatio;
  canvas.style.width = style.width;
  canvas.style.height = style.height;
  ctx.setTransform(1,0,0,1,0,0);
  ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

let audioCtx, source, analyser, dataArray;
function setupAudio() {
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  source = audioCtx.createMediaElementSource(bgm);
  analyser = audioCtx.createAnalyser();
  analyser.fftSize = 128;
  source.connect(analyser);
  analyser.connect(audioCtx.destination);
  dataArray = new Uint8Array(analyser.frequencyBinCount);
}

function drawWave() {
  requestAnimationFrame(drawWave);
  analyser.getByteFrequencyData(dataArray);
  const width = canvas.width / window.devicePixelRatio;
  const height = canvas.height / window.devicePixelRatio;
  ctx.clearRect(0,0,width,height);
  const pointsCount = dataArray.length;
  const baseY = height*0.6;
  const waveLength = width / (pointsCount-1);

  ctx.lineWidth = 6;
  ctx.lineJoin = "round";
  ctx.lineCap = "round";

  const gradientLine = ctx.createLinearGradient(0,0,width,0);
  gradientLine.addColorStop(0,"rgba(255,102,204,1)");
  gradientLine.addColorStop(1,"rgba(180,50,230,1)");

  const gradientFill = ctx.createLinearGradient(0,0,0,height);
  gradientFill.addColorStop(0,"rgba(255,102,204,0.4)");
  gradientFill.addColorStop(1,"rgba(180,50,230,0.05)");

  ctx.strokeStyle = gradientLine;
  ctx.fillStyle = gradientFill;
  ctx.beginPath();

  for (let i=0;i<pointsCount;i++){
    const x = i*waveLength;
    const amp = dataArray[i]/255;
    const y = baseY - (Math.sin(i*0.3 + performance.now()/400)*20 +
                        Math.sin(i*0.1 + performance.now()/200)*15)*amp -
                        amp*40;
    if(i===0) ctx.moveTo(x,y);
    else ctx.lineTo(x,y);
  }
  ctx.stroke();
  ctx.lineTo(width,height);
  ctx.lineTo(0,height);
  ctx.closePath();
  ctx.fill();
}

// --- –ê–Ω–∏–º–∞—Ü–∏—è —Ñ–æ—Ç–æ ---
function spawnPhoto(){
  const photo = document.createElement("img");
  photo.src = photos[Math.floor(Math.random()*photos.length)];
  photo.classList.add("photo");
  photo.style.left = 50 + Math.random()*(window.innerWidth-100)+"px";
  document.body.appendChild(photo);

  const startTime = Date.now();
  const duration = 3500 + Math.random()*1500;

  function animate(){
    const t = (Date.now() - startTime)/duration;
    if(t<1){
      const y = -150 + (window.innerHeight+200)*Math.sin(t*Math.PI/2);
      const scale = 0.8 + 0.5 * Math.sin(t*Math.PI);
      const rotate = t*360;
      const opacity = Math.sin(t*Math.PI);
      photo.style.transform = `translate(-50%, ${y}px) scale(${scale}) rotate(${rotate}deg)`;
      photo.style.opacity = opacity;
      requestAnimationFrame(animate);
    } else {
      photo.remove();
    }
  }
  animate();
}

// --- –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ ---
function createConfetti() {
  for (let i = 0; i < 150; i++) {
    const confetti = document.createElement("div");
    confetti.classList.add("confetti");
    
    // –°–ª—É—á–∞–π–Ω—ã–π —Ü–≤–µ—Ç –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    const colors = ['#ff66cc', '#ff99ff', '#cc66ff', '#ffccff', '#ff66ff'];
    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
    
    // –°–ª—É—á–∞–π–Ω–∞—è —Ñ–æ—Ä–º–∞
    const shapes = ['circle', 'square', 'rectangle'];
    const shape = shapes[Math.floor(Math.random() * shapes.length)];
    
    if (shape === 'circle') {
      confetti.style.borderRadius = '50%';
    } else if (shape === 'rectangle') {
      confetti.style.width = '8px';
      confetti.style.height = '20px';
    }
    
    confetti.style.left = Math.random() * 100 + 'vw';
    confetti.style.top = '-20px';
    
    document.body.appendChild(confetti);
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–∞–¥–µ–Ω–∏—è
    const animation = confetti.animate([
      { 
        transform: `translateY(0) rotate(0deg)`,
        opacity: 1
      },
      { 
        transform: `translateY(${window.innerHeight + 100}px) rotate(${360 + Math.random() * 360}deg)`,
        opacity: 0
      }
    ], {
      duration: 3000 + Math.random() * 2000,
      easing: 'cubic-bezier(0.1, 0.8, 0.8, 1)',
      delay: Math.random() * 500
    });
    
    animation.onfinish = () => confetti.remove();
  }
}

// --- –°–µ—Ä–¥–µ—á–∫–∏ ---
function createHearts() {
  setInterval(() => {
    const heart = document.createElement("div");
    heart.classList.add("heart");
    heart.innerHTML = "üíñ";
    heart.style.left = Math.random() * 100 + 'vw';
    heart.style.top = '100vh';
    document.body.appendChild(heart);
    
    const animation = heart.animate([
      { 
        transform: 'translateY(0) scale(1)',
        opacity: 1
      },
      { 
        transform: `translateY(-${Math.random() * 300 + 200}px) scale(${0.5 + Math.random() * 0.5})`,
        opacity: 0
      }
    ], {
      duration: 2000 + Math.random() * 2000,
      easing: 'ease-out'
    });
    
    animation.onfinish = () => heart.remove();
  }, 500);
}

// --- –ö–Ω–æ–ø–∫–∞ ---
playButton.addEventListener("click", ()=>{
  if(!audioCtx) setupAudio();
  bgm.play().then(()=>{
    drawWave();
    setInterval(spawnPhoto, 1500);
    createConfetti();
    createHearts();
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
    setTimeout(() => {
      message.classList.add('show');
    }, 1000);
    
    playButton.style.display = "none";
  }).catch(error => {
    console.error("–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –º—É–∑—ã–∫–∏:", error);
    alert("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –º—É–∑—ã–∫—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª –º—É–∑—ã–∫–∏.");
  });
});

// --- –î–æ–±–∞–≤–ª—è–µ–º –±–æ–ª—å—à–µ –ø–µ—á–µ–Ω–µ–∫ ---
function addMoreCookies() {
  for (let i = 0; i < 5; i++) {
    const cookie = document.createElement("img");
    cookie.classList.add("cookie");
    cookie.src = "images/cookie1.png";
    cookie.style.left = Math.random() * 100 + '%';
    cookie.style.animationDuration = (7 + Math.random() * 6) + 's';
    cookie.style.animationDelay = Math.random() * 5 + 's';
    document.body.appendChild(cookie);
  }
}

// –ó–∞–ø—É—Å–∫–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—á–µ–Ω—å–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
window.addEventListener('load', addMoreCookies);
</script>

</body>
</html>
